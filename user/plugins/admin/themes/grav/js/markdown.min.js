/*! Licensed under MIT, https://github.com/sofish/pen */
(function(b){if(!b.Pen){return}var a={keymap:{"96":"`","62":">","49":"1","46":".","45":"-","42":"*","35":"#"},stack:[]};a.valid=function(d){var c=d.length;if(d.match(/[#]{1,6}/)){return["h"+c,c]}else{if(d==="```"){return["pre",c]}else{if(d===">"){return["blockquote",c]}else{if(d==="1."){return["insertorderedlist",c]}else{if(d==="-"||d==="*"){return["insertunorderedlist",c]}else{if(d.match(/(?:\.|\*|\-){3,}/)){return["inserthorizontalrule",c]}}}}}}};a.parse=function(g){var d=g.keyCode||g.which;if(d===32){var c=this.stack.join("");this.stack=[];var f=this.valid(c);if(f){g.preventDefault();return f}}if(this.keymap[d]){this.stack.push(this.keymap[d])}return false};a.action=function(d,e){if(d.selection.focusOffset>e[1]){return}var c=d.selection.focusNode;c.textContent=c.textContent.slice(e[1]);d.execCommand(e[0])};a.init=function(c){c.on("keypress",function(f){var d=a.parse(f);if(d){return a.action(c,d)}})};b.Pen.prototype.markdown=a}(window));